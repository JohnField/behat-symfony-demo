default:
  suites:
    domain:
      contexts:
        - DomainContext

    services:
      contexts:
        - ServiceContext:
            courseEnrolments: "@cjm.training.enrolment.course_enrolments"

  extensions:
    Behat\Symfony2Extension:
      kernel:
        bootstrap: ~
        class: App\Kernel

end-to-end:
  suites:
    domain: false
    services: false

    ui:
      contexts:
        - EndToEndContext:
             courseEnrolments: "@cjm.training.enrolment.course_enrolments"
             entityManager: "@doctrine.orm.entity_manager"

  extensions:
    Behat\Symfony2Extension:
      kernel:
        env: test_e2e

    Behat\MinkExtension:
      base_url: http://127.0.0.1:8000/app_test.php
      sessions:
        symfony:
          symfony2: ~
        chrome:
          selenium2:
            browser: chrome
            wd_host: http://localhost:4444/wd/hub
            capabilities:
              chrome:
                switches:
                  - "--headless"
                  - "--disable-gpu"
